{"ast":null,"code":"import { baseUrl, token } from \"./utils.js\";\nclass Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  _onResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n  _request(url, options) {\n    return fetch(url, options).then(this._onResponse);\n  }\n  getUserInfo() {\n    return this._request(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: this._headers\n    });\n  }\n  getCards() {\n    return this._request(`${this._baseUrl}/cards`, {\n      method: \"GET\",\n      headers: this._headers\n    });\n  }\n  addCard(_ref2) {\n    let {\n      name,\n      link\n    } = _ref2;\n    return this._request(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link\n      })\n    });\n  }\n  deleteCard(cardId) {\n    return this._request(`${this._baseUrl}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n      body: JSON.stringify({\n        cardId\n      })\n    });\n  }\n  setUserInfo(_ref3) {\n    let {\n      name,\n      about\n    } = _ref3;\n    return this._request(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about\n      })\n    });\n  }\n  setAvatar(_ref4) {\n    let {\n      avatar\n    } = _ref4;\n    return this._request(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar\n      })\n    });\n  }\n  toggleCardLikeStatus(cardId, isOwnLiked) {\n    return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: `${isOwnLiked}`,\n      headers: this._headers,\n      body: JSON.stringify()\n    });\n  }\n}\nconst api = new Api({\n  baseUrl: baseUrl,\n  headers: {\n    authorization: token,\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default api;","map":{"version":3,"names":["baseUrl","token","Api","constructor","headers","_baseUrl","_headers","_onResponse","res","ok","json","Promise","reject","status","_request","url","options","fetch","then","getUserInfo","method","getCards","addCard","name","link","body","JSON","stringify","deleteCard","cardId","setUserInfo","about","setAvatar","avatar","toggleCardLikeStatus","isOwnLiked","api","authorization"],"sources":["/Users/michaelsilkov/Desktop/YP sprints 10-12/mesto-react/mesto/src/utils/api.js"],"sourcesContent":["import { baseUrl, token } from \"./utils.js\";\r\nclass Api {\r\n\tconstructor({ baseUrl, headers }) {\r\n\t\tthis._baseUrl = baseUrl;\r\n\t\tthis._headers = headers;\r\n\t}\r\n\r\n\t_onResponse(res) {\r\n\t\tif (res.ok) {\r\n\t\t\treturn res.json();\r\n\t\t}\r\n\t\treturn Promise.reject(`Ошибка: ${res.status}`);\r\n\t}\r\n\r\n\t_request(url, options) {\r\n\t\treturn fetch(url, options).then(this._onResponse);\r\n\t}\r\n\r\n\tgetUserInfo() {\r\n\t\treturn this._request(`${this._baseUrl}/users/me`, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: this._headers,\r\n\t\t});\r\n\t}\r\n\r\n\tgetCards() {\r\n\t\treturn this._request(`${this._baseUrl}/cards`, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: this._headers,\r\n\t\t});\r\n\t}\r\n\r\n\taddCard({ name, link }) {\r\n\t\treturn this._request(`${this._baseUrl}/cards`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: this._headers,\r\n\t\t\tbody: JSON.stringify({ name, link }),\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteCard(cardId) {\r\n\t\treturn this._request(`${this._baseUrl}/cards/${cardId}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\theaders: this._headers,\r\n\t\t\tbody: JSON.stringify({ cardId }),\r\n\t\t});\r\n\t}\r\n\r\n\tsetUserInfo({ name, about }) {\r\n\t\treturn this._request(`${this._baseUrl}/users/me`, {\r\n\t\t\tmethod: \"PATCH\",\r\n\t\t\theaders: this._headers,\r\n\t\t\tbody: JSON.stringify({ name, about }),\r\n\t\t});\r\n\t}\r\n\r\n\tsetAvatar({ avatar }) {\r\n\t\treturn this._request(`${this._baseUrl}/users/me/avatar`, {\r\n\t\t\tmethod: \"PATCH\",\r\n\t\t\theaders: this._headers,\r\n\t\t\tbody: JSON.stringify({ avatar }),\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleCardLikeStatus(cardId, isOwnLiked) {\r\n\t\treturn this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n\t\t\tmethod: `${isOwnLiked }`,\r\n\t\t\theaders: this._headers,\r\n\t\t\tbody: JSON.stringify(),\r\n\t\t});\r\n\t}\r\n}\r\n\r\nconst api = new Api({\r\n\tbaseUrl: baseUrl,\r\n\theaders: {\r\n\t\tauthorization: token,\r\n\t\t\"Content-Type\": \"application/json\",\r\n\t},\r\n});\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}